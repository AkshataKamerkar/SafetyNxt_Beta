<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="/static/css/map.css" />
    <title>live-map</title>

    <!-- Include Leaflet and other libraries -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <script src="/static/js/awesomplete.js"></script> <!-- Add this line for Awesomplete -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <!-- Add this style for Awesomplete (customize as needed) -->
    <style>
        .location-input-box {
            position: relative;
            display: inline-block;
            margin-bottom: 10px;
        }

        .text-box {
            width: 200px; /* Adjust the width as needed */
        }

        #location-suggestions {
            display: none;
        }
    </style>
</head>

<body>
    <div id="directions-box">
        <div id="directions-title">Driving Directions</div>

        <form id='locationForm' method="GET" action="{% url 'main:menu' %}">
            {% csrf_token %}
            <div class="container">
                <!-- Input fields for starting point and destination -->

                <div class="input-box">
                    <img class="icon-left" src="/static/img/start location.png" />
                    <div class="bg-bar"></div>
                    <img class="icon-right" src="/static/img/search.png" />
                    <input type="text" name='start_location' id="id_start_location" class="text-box" placeholder="Choose starting point" list="location-suggestions" />

                    <datalist id="location-suggestions"></datalist>
                </div>

                <div class="destination-box">
                    <img class="icon-left" src="/static/img/destination.png" />
                    <div class="bg-bar"></div>
                    <img class="icon-right" src="/static/img/search.png" />
                    <input type="text" name="end_location" id="id_end_location" class="text-box" placeholder="Choose destination" list="location-suggestions" />

                </div>

                <!-- Rotate Icon -->
                <img class="rotate-icon" src="/static/img/dot.png" />

                <!-- Additional Icon -->
                <img class="additional-icon" src="/static/img/switch.png" onclick="reverseInputs()"/>

                <!-- Find Route Box -->
                <div class="find-route-box">
                    <div class="background-bar"></div>
                    <!-- Button to trigger findRoute function -->

                    <a href="{% url 'main:menu' %}">
                        <button class="find-route-text">
                            Start Monitoring
                        </button>
                    </a>
                </div>
            </div>
        </form>
    </div>

    <a href="{% url 'account_logout' %}">
        <button id="logout-btn" class="logout-button">
            Log Out
        </button>
    </a>

    <div class="folium-map" id="map_aa291a4f1eafe5bbd01101418f32837c"></div>



    <a href="/" class="logo"><img src="/static/img/logo.png" alt="">SafetyNXT</a>



    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/static/js/map.js"></script>
    <script>

        // Example locations for Pune
        var puneLocations = ['Aundh, Pune', 'Koregaon Park, Pune', 'Magarpatta, Pune', 'Shivaji Nagar, Pune','Shaniwar Wada, Pune',
            'Aga Khan Palace, Pune',
            'Sinhagad Fort, Pune',
            'Osho Ashram, Pune',
            'Dagadusheth Halwai Ganpati Temple, Pune',
            'Raja Dinkar Kelkar Museum, Pune',
            'Lal Mahal, Pune',
            'Khadakwasla Dam, Pune',
            'Pataleshwar Cave Temple, Pune',
            'Parvati Hill, Pune',
            'Bund Garden, Pune',
            'Vetal Tekdi, Pune',
            'Pu La Deshpande Garden, Pune',
            'Mulshi Lake and Dam, Pune',
            'Phoenix Marketcity, Pune',
            'FC Road (Fergusson College Road), Pune',
            'Koregaon Park, Pune',
            'Saras Baug, Pune',
            'Darshan Museum, Pune',
            'Rajiv Gandhi Zoological Park, Pune'];

        // Populate datalist with suggestions
        puneLocations.forEach(function (location) {
            var option = document.createElement('option');
            option.value = location;
            document.getElementById('location-suggestions').appendChild(option.cloneNode(true));
        });

        // Initialize Awesomplete for input fields
        var startInput = new Awesomplete(document.getElementById('start'), { list: "#location-suggestions" });
        var destinationInput = new Awesomplete(document.getElementById('destination'), { list: "#location-suggestions" });
    </script>
</body>
</html>